schema: '2.0'
stages:
  fetch:
    cmd: poetry run python src/data/fetch_data.py
    deps:
    - path: src/data/fetch_data.py
      hash: md5
      md5: 5867135077809f48fce60c83bb9fc0f9
      size: 6465
    outs:
    - path: data/raw
      hash: md5
      md5: dfe251678f3bb66ddbc4dacffd18dff1.dir
      size: 168615
      nfiles: 69
  preprocess:
    cmd: poetry run python src/data/preprocess_data.py
    deps:
    - path: data/raw
      hash: md5
      md5: dfe251678f3bb66ddbc4dacffd18dff1.dir
      size: 168615
      nfiles: 69
    - path: src/data/preprocess_data.py
      hash: md5
      md5: 1662f17df2af4b030969b251d2a4adc3
      size: 3618
    outs:
    - path: data/processed/combined
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    - path: data/processed/mbajk
      hash: md5
      md5: b06edfb4b02035ed767081f5f5328274.dir
      size: 10761
      nfiles: 34
    - path: data/processed/weather
      hash: md5
      md5: 3c9ed97da7837cd64b27173537757b5c.dir
      size: 132749
      nfiles: 34
  split:
    cmd: poetry run python src/data/final_processing.py
    deps:
    - path: data/processed/combined
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    - path: src/data/final_processing.py
      hash: md5
      md5: a6f312adc6982afb88ab0126cc06c9b5
      size: 1434
    outs:
    - path: data/processed/test
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    - path: data/processed/train
      hash: md5
      md5: 20a20b192e6bb0432b45695478e9931e.dir
      size: 4760
      nfiles: 34
  reference_data:
    cmd: "mkdir -p data/processed\ncp -r data/processed/combined data/processed/reference_data\n
      cp -r data/processed/combined data/processed/current_data\n"
    deps:
    - path: data/processed/combined
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    outs:
    - path: data/processed/current_data
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    - path: data/processed/reference_data
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
  validate_and_test:
    cmd: poetry run python src/data/validate_and_test.py
    deps:
    - path: data/processed/current_data
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    - path: data/processed/reference_data
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    - path: src/data/validate_and_test.py
      hash: md5
      md5: b190721d53acb9d611ce6c614abaea5f
      size: 5013
  split_data:
    cmd: poetry run python src/data/split_data.py
    deps:
    - path: data/processed/current_data
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    - path: src/data/split_data.py
      hash: md5
      md5: bd02b4c874c5cb7567129a20eade3536
      size: 1768
    outs:
    - path: data/processed/train_test_from_current/test
      hash: md5
      md5: 9cc35dbd83ee173575d18b7a3028c502.dir
      size: 7108
      nfiles: 34
    - path: data/processed/train_test_from_current/train
      hash: md5
      md5: 8c19a11d40a7ede9140e3289030342a7.dir
      size: 13888
      nfiles: 34
  train_model_mlflow:
    cmd: poetry run python src/models/train_model_mlflow.py
    deps:
    - path: data/processed/train_test_from_current/train
      hash: md5
      md5: 8c19a11d40a7ede9140e3289030342a7.dir
      size: 13888
      nfiles: 34
    - path: src/models/train_model_mlflow.py
      hash: md5
      md5: 52773b4ee483fd6466839a6f4f384067
      size: 3116
    outs:
    - path: models/models_mlflow
      hash: md5
      md5: 488a9e64527bc4ca55d16ef6abfec336.dir
      size: 5988672
      nfiles: 29
  predict_model_mlflow:
    cmd: poetry run python src/models/predict_model_mlflow.py
    deps:
    - path: data/processed/train_test_from_current/test
      hash: md5
      md5: 9cc35dbd83ee173575d18b7a3028c502.dir
      size: 7108
      nfiles: 34
    - path: models/models_mlflow
      hash: md5
      md5: 488a9e64527bc4ca55d16ef6abfec336.dir
      size: 5988672
      nfiles: 29
    - path: src/models/predict_model_mlflow.py
      hash: md5
      md5: b7f6aa10af67d63ce8cb3763893cfc0f
      size: 2803
  merge_data:
    cmd: poetry run python src/data/merge_data.py
    deps:
    - path: data/processed/combined
      hash: md5
      md5: bcc49f401a154d2b41a127dbc824aee0.dir
      size: 16236
      nfiles: 34
    - path: src/data/merge_data.py
      hash: md5
      md5: 38afd2c3c3eec28699525e5cdc47106d
      size: 797
    outs:
    - path: data/processed/merged/data.csv
      hash: md5
      md5: 606cf5473f9db52ea2c356f46e9fe5f2
      size: 11616
  reference_data_merged:
    cmd: "mkdir -p data/processed/merged_reference\ncp data/processed/merged/data.csv
      data/processed/merged_reference/reference_data.csv\ncp data/processed/merged/data.csv
      data/processed/merged_reference/current_data.csv\n"
    deps:
    - path: data/processed/merged/data.csv
      hash: md5
      md5: 606cf5473f9db52ea2c356f46e9fe5f2
      size: 11616
    outs:
    - path: data/processed/merged_reference/current_data.csv
      hash: md5
      md5: 606cf5473f9db52ea2c356f46e9fe5f2
      size: 11616
    - path: data/processed/merged_reference/reference_data.csv
      hash: md5
      md5: 606cf5473f9db52ea2c356f46e9fe5f2
      size: 11616
  validate_and_test_merged:
    cmd: poetry run python src/data/validate_and_test_merged.py
    deps:
    - path: data/processed/merged_reference/current_data.csv
      hash: md5
      md5: 606cf5473f9db52ea2c356f46e9fe5f2
      size: 11616
    - path: data/processed/merged_reference/reference_data.csv
      hash: md5
      md5: 606cf5473f9db52ea2c356f46e9fe5f2
      size: 11616
    - path: src/data/validate_and_test_merged.py
      hash: md5
      md5: 044597704d888f512d8ac109222602bf
      size: 4657
